# ==============================================================================
# Apache NiFi Cluster Custom Resource Definition (CRD)
# ==============================================================================
# –û–ø–µ—Ä–∞—Ç–æ—Ä: nifi-operator (github.com/repinoid/nifi-operator)
# API Version: nifi.kube5s.ru/v1alpha1
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NiFi: https://nifi.apache.org/nifi-docs/administration-guide.html
#
# CHANGELOG:
# - 2025-12-23: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã nifiServiceUrl –∏ proxyHost –≤ —Å–µ–∫—Ü–∏—é adminGateway
#               –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ admin-gateway –∏–∑ CRD
# ==============================================================================

apiVersion: nifi.kube5s.ru/v1alpha1
kind: NifiCluster
metadata:
  # ============================================================================
  # METADATA: –ë–∞–∑–æ–≤–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–∞ –≤ Kubernetes
  # ============================================================================
  
  # –ò–º—è –∫–ª–∞—Å—Ç–µ—Ä–∞ NiFi (–±—É–¥–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –¥–ª—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤)
  # Pods –±—É–¥—É—Ç –Ω–∞–∑–≤–∞–Ω—ã: <name>-0, <name>-1, ... <name>-N
  # Services: <name>, <name>-headless
  # ConfigMap: <name>-config
  name: nificl
  
  # Namespace –≥–¥–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã NiFi
  # –í–ê–ñ–ù–û: Namespace –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
  namespace: nifi

spec:
  # ============================================================================
  # CLUSTER CONFIGURATION: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–µ—Ä—Å–∏—è
  # ============================================================================
  
  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ (–Ω–æ–¥) –≤ NiFi –∫–ª–∞—Å—Ç–µ—Ä–µ
  # –¢–ï–ö–£–©–ï–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï: –û–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ 1 —Ä–µ–ø–ª–∏–∫—É
  # TODO: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É multi-node –∫–ª–∞—Å—Ç–µ—Ä–∞ (—Ç—Ä–µ–±—É–µ—Ç ZooKeeper/Kubernetes Leader Election)
  # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#clustering-configuration
  replicaCount: 1
  
  # Docker –æ–±—Ä–∞–∑ Apache NiFi
  # –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏: https://hub.docker.com/r/apache/nifi/tags
  # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é, –∏–∑–±–µ–≥–∞–π—Ç–µ :latest
  # NiFi 2.x —Ç—Ä–µ–±—É–µ—Ç Java 21 (—Å–º. System Requirements –≤ Admin Guide)
  image: "apache/nifi:2.6.0"

  # ============================================================================
  # DOWNLOAD FILES: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
  # ============================================================================
  # –ú–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ JAR-–±–∏–±–ª–∏–æ—Ç–µ–∫, –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ NiFi
  # –§–∞–π–ª—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º 'download-files' –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Pod
  # 
  # –û–¢–õ–ê–î–ö–ê:
  #   kubectl logs nificl-0 -c download-files -n nifi  # –ª–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏
  #   kubectl logs nificl-0 -n nifi | grep ü¶û          # —Ñ–∏–ª—å—Ç—Ä –ª–æ–≥–æ–≤
  # 
  # –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:
  #   - JDBC –¥—Ä–∞–π–≤–µ—Ä—ã (PostgreSQL, MySQL, Oracle)
  #   - Kafka –∫–ª–∏–µ–Ω—Ç—ã
  #   - Custom processors (NARs)
  #   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è processors
  downloadFiles:
    # PostgreSQL JDBC Driver
    # –í–µ—Ä—Å–∏—è: 42.7.8 (–ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ https://jdbc.postgresql.org/download/)
    - https://jdbc.postgresql.org/download/postgresql-42.7.8.jar
    
    # Kafka Client Libraries (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Kafka processors
    # - https://repo1.maven.org/maven2/org/apache/kafka/kafka-clients/3.6.1/kafka-clients-3.6.1.jar

  # ============================================================================
  # TLS CONFIGURATION: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è NiFi —Å–µ—Ä–≤–µ—Ä–∞
  # ============================================================================
  # –ò–º—è Kubernetes Secret —Å TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –¥–ª—è NiFi —Å–µ—Ä–≤–µ—Ä–∞
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (internal Service-to-Service communication)
  # 
  # –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï:
  #   - –û–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ NiFi —á–µ—Ä–µ–∑ internal Service DNS (nificl.nifi.svc.cluster.local)
  #   - NiFi Registry –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç internal DNS –∏–º–µ–Ω–∞
  #   - –¢—Ä–µ–±—É–µ—Ç—Å—è self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å SAN —Å–æ–¥–µ—Ä–∂–∞—â–∏–º:
  #       * nificl.nifi.svc.cluster.local (Pod DNS)
  #       * *.nifi.svc.cluster.local (Headless Service DNS)
  #       * nifi.kube5s.ru (–≤–Ω–µ—à–Ω–∏–π DNS –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  # 
  # –†–ê–ó–î–ï–õ–ï–ù–ò–ï –°–ï–†–¢–ò–§–ò–ö–ê–¢–û–í:
  #   - tlsSecretName (—ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä): self-signed –¥–ª—è internal (—Å .cluster.local DNS)
  #   - spec.ingress.tls[0].secretName: Let's Encrypt –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏–π DNS)
  # 
  # –°–û–ó–î–ê–ù–ò–ï –°–ï–†–¢–ò–§–ò–ö–ê–¢–ê:
  #   1. –°–æ–∑–¥–∞—Ç—å self-signed CA issuer (—Å–º. nifi/cert-manager/05-internal-ca-issuer.yaml)
  #   2. –°–æ–∑–¥–∞—Ç—å Certificate —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ dnsNames
  #   3. cert-manager –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç Secret
  # 
  # –ü–†–ò–ú–ï–† Certificate (cert-manager):
  #   apiVersion: cert-manager.io/v1
  #   kind: Certificate
  #   metadata:
  #     name: nifi-internal-tls-cert
  #     namespace: nifi
  #   spec:
  #     secretName: nifi-internal-tls-secret
  #     issuerRef:
  #       name: nifi-internal-ca-issuer
  #       kind: Issuer
  #     dnsNames:
  #       - nifi.kube5s.ru
  #       - nificl.nifi.svc.cluster.local
  #       - "*.nifi.svc.cluster.local"
  # 
  # –ï–°–õ–ò –ù–ï –£–ö–ê–ó–ê–ù–û:
  #   Fallback –Ω–∞ spec.ingress.tls[0].secretName (backward compatibility)
  #   –ù–û —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã SNI validation –µ—Å–ª–∏ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
  #   –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç internal DNS –∏–º–µ–Ω–∞
  tlsSecretName: nifi-internal-tls-secret

  # ============================================================================
  # AUTHENTICATION & AUTHORIZATION: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ NiFi
  # ============================================================================
  # NiFi –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
  #   - OpenID Connect (OIDC) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å
  #   - LDAP
  #   - Kerberos
  #   - X.509 Certificates
  #   - Single User (–¥–ª—è dev/test)
  # 
  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://nifi.apache.org/nifi-docs/administration-guide.html#user-authentication
  auth:
    # --------------------------------------------------------------------------
    # OpenID Connect (OIDC) Configuration
    # --------------------------------------------------------------------------
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º Identity Provider (Keycloak, Auth0, Okta, etc.)
    # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Authorization Code Flow —Å PKCE (RFC 7636)
    oidc:
      # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å OIDC –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
      # –ï—Å–ª–∏ false - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, certificates)
      enabled: true
      
      # –ò–º—è Realm –≤ Keycloak (–∏–ª–∏ Tenant –≤ –¥—Ä—É–≥–∏—Ö IdP)
      # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
      realmName: "nifi-realm"
      
      # OIDC Discovery URL (OpenID Connect metadata endpoint)
      # –§–æ—Ä–º–∞—Ç –¥–ª—è Keycloak: https://<keycloak-host>/realms/<realm-name>/.well-known/openid-configuration
      # NiFi –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç endpoints –¥–ª—è:
      #   - authorization_endpoint
      #   - token_endpoint
      #   - jwks_uri (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT –ø–æ–¥–ø–∏—Å–µ–π)
      #   - userinfo_endpoint
      # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.security.user.oidc.discovery.url
      discoveryURL: "https://keycloak.k8c.ru/realms/nifi-realm/.well-known/openid-configuration" # ***
      
      # Client ID –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ IdP –¥–ª—è NiFi
      # –°–æ–∑–¥–∞—ë—Ç—Å—è –≤: Keycloak Admin Console ‚Üí Clients ‚Üí Create Client
      # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.security.user.oidc.client.id
      clientID: "nifi-keycloak-client"
      
      # Client Secret –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
      # –í–ê–ñ–ù–û: –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kubernetes Secret!
      # TODO: –í—ã–Ω–µ—Å—Ç–∏ –≤ Secret –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secretRef
      # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.security.user.oidc.client.secret
      clientSecret: "KykVMjewFo8CvmKa20cVEm3ROCIwoKpX"  # ***

      # –ò–º—è Kubernetes Secret —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Keycloak
      # –§–æ—Ä–º–∞—Ç Secret:
      #   apiVersion: v1
      #   kind: Secret
      #   data:
      #     tls.crt: <base64-encoded-certificate>
      # 
      # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ TLS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Keycloak
      # –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ NiFi truststore (nifi.security.truststore)
      # 
      # –°–û–ó–î–ê–ù–ò–ï:
      #   openssl s_client -connect keycloak.k8c.ru:443 -showcerts 2>/dev/null </dev/null | \
      #     sed -n '/-----BEGIN CERTIFICATE-----/,/-----END CERTIFICATE-----/p' | \
      #     kubectl create secret generic keycloak-nifi-secret \
      #       --from-file=tls.crt=/dev/stdin -n nifi
      keycloakCert: "keycloak-nifi-secret"
      
      # –ü–∞—Ä–æ–ª–∏ –¥–ª—è Java KeyStore/TrustStore (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤ –∫–æ–¥–µ)
      # –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è private keys –≤ PKCS12 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö
      # –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "parole"
      # –°–≤–æ–π—Å—Ç–≤–∞ –≤ nifi.properties:
      #   nifi.security.keystorePasswd
      #   nifi.security.truststorePasswd
      #   nifi.security.keyPasswd
      # keystorePassword: "parole"
      # truststorePassword: "parole"
      # keyPassword: "parole"

    # --------------------------------------------------------------------------
    # Group-Based Authorization
    # --------------------------------------------------------------------------
    # NiFi –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä—É–ø–ø—ã –∏–∑ OIDC token claims –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    # –ì—Ä—É–ø–ø—ã –º–∞–ø–ø—è—Ç—Å—è –Ω–∞ NiFi policies —á–µ—Ä–µ–∑ FileAccessPolicyProvider
    
    # –ì—Ä—É–ø–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (full access)
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞:
    #   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏
    #   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ policies
    #   - –î–æ—Å—Ç—É–ø –∫ Controller Settings
    #   - Proxy user requests
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ authorizers.xml –∫–∞–∫ Initial Admin Group
    # 
    # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ò–º–µ–Ω–∞ –≥—Ä—É–ø–ø —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ NiFi!
    # –ù–ï –ò–ó–ú–ï–ù–Ø–ô–¢–ï adminGroup/clientGroup –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞!
    # –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ CRD –≤—ã–∑–æ–≤–µ—Ç –±–µ—Å–ø–æ–ª–µ–∑–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É (~4 –º–∏–Ω) –∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è.
    # –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º—ë–Ω –≥—Ä—É–ø–ø –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ NiFi UI (Users menu) + Keycloak UI –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
    adminGroup: "nifi_admins"
    
    # –ì—Ä—É–ø–ø–∞ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (view/modify flow)
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å dataflow
    # –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç policies –≤ authorizations.xml
    clientGroup: "nifi_clients"
    
    # –ù–∞–∑–≤–∞–Ω–∏–µ claim –≤ JWT —Ç–æ–∫–µ–Ω–µ —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Keycloak:
    #   Clients ‚Üí <client-id> ‚Üí Dedicated scopes ‚Üí 
    #   Add predefined mapper ‚Üí Group Membership ‚Üí 
    #   Token Claim Name: <–∑–Ω–∞—á–µ–Ω–∏–µ>
    # 
    # –ü—Ä–∏–º–µ—Ä JWT payload:
    #   {
    #     "sub": "user@example.com",
    #     "nifi_groups": ["nifi_admins", "nifi_clients"],
    #     ...
    #   }
    # 
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.security.user.oidc.claim.groups
    tokenClaimName: "nifi_groups"
    
    # --------------------------------------------------------------------------
    # Initial Admin User (OIDC)
    # --------------------------------------------------------------------------
    # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ OIDC, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏—Ç –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ NiFi
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ claim 'preferred_username' Keycloak —Ç–æ–∫–µ–Ω–∞
    # 
    # –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï:
    #   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ NiFi —Å–æ–∑–¥–∞—ë—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (authorizations.xml)
    #   - –ë–µ–∑ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ç–æ–ª—å–∫–æ operator client cert (CN=nifi-operator-client) –±—É–¥–µ—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞
    #   - OIDC –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ —Å–º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å NiFi —á–µ—Ä–µ–∑ UI
    # 
    # –¢–†–ï–ë–û–í–ê–ù–ò–ï:
    #   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ Keycloak realm
    #   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –≥—Ä—É–ø–ø–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ adminGroup (nifi_admins)
    # 
    # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ!
    # –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è authorizations.xml –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ù–ï –¥–∞—Å—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞.
    # –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∞–¥–º–∏–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ NiFi UI ‚Üí Users menu
    initialAdminUser: "regadmin"
    
  # ============================================================================
  # HOST ALIASES: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DNS (Network patching)
  # ============================================================================
  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–∞–ø–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ DNS –∏–º–µ–Ω–∞ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ClusterIP
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–±–ª–µ–º —Å Ingress –∏ mTLS
  hostAliases:
    - ip: "10.107.155.29" # ClusterIP —Å–µ—Ä–≤–∏—Å–∞ Registry
      hostnames:
        - "registry.kube5s.ru"

  # ============================================================================
  # ENVIRONMNET VARIABLES: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è NiFi —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  # ============================================================================
  # –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  # nifi.properties –∏ bootstrap.conf
  # 
  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://nifi.apache.org/nifi-docs/administration-guide.html#web-properties
  env:
    # --------------------------------------------------------------------------
    # Web Server Configuration (HTTPS)
    # --------------------------------------------------------------------------
    
    # Hostname –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º NiFi —Å–ª—É—à–∞–µ—Ç HTTPS –∑–∞–ø—Ä–æ—Å—ã
    # "0.0.0.0" - —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
    # –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP –¥–ª—è security
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.web.https.host
    webHttpsHost: "0.0.0.0"
    
    # –ü–æ—Ä—Ç –¥–ª—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç NiFi: 8443
    # –ü–æ—Ä—Ç—ã < 1024 —Ç—Ä–µ–±—É—é—Ç root –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.web.https.port
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#port-configuration
    webHttpsPort: "8443"
    
    # Hostname:port –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ reverse proxy (Ingress)
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
    #   - –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URLs –≤ UI
    #   - Site-to-Site –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
    #   - Cluster node discovery
    # 
    # –§–æ—Ä–º–∞—Ç: <hostname>:<port> –∏–ª–∏ <hostname> (–µ—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç 443)
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.web.proxy.host
    # –í–ê–ñ–ù–û: –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—é –≤ spec.ingress.host
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#proxy-configuration
    webProxyHost: "nifi.kube5s.ru:443" # ***
    
    # --------------------------------------------------------------------------
    # Logging Configuration
    # --------------------------------------------------------------------------
    
    # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è NiFi –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    # –ó–Ω–∞—á–µ–Ω–∏—è: TRACE, DEBUG, INFO, WARN, ERROR
    # DEBUG - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è troubleshooting
    # INFO - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è production
    # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ INFO –≤ production, DEBUG —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    logLevel: "DEBUG"
    
    # --------------------------------------------------------------------------
    # TLS/mTLS Configuration
    # --------------------------------------------------------------------------
    
    # –¢—Ä–µ–±–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (mutual TLS)
    # "true" - –∫–ª–∏–µ–Ω—Ç—ã –î–û–õ–ñ–ù–´ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π X.509 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
    # "false" - —Ç–æ–ª—å–∫–æ server-side TLS (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTPS)
    # 
    # –ö–æ–≥–¥–∞ –≤–∫–ª—é—á—ë–Ω OIDC, –æ–±—ã—á–Ω–æ —Å—Ç–∞–≤–∏—Ç—Å—è "false" (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ OIDC)
    # –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã - "true"
    # 
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.security.needClientAuth
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#security-configuration
    securityNeedClientAuth: "false"
    
    # --------------------------------------------------------------------------
    # Cluster Configuration
    # --------------------------------------------------------------------------
    
    # –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–æ–¥–æ–π –∫–ª–∞—Å—Ç–µ—Ä–∞
    # "true" - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ (—Ç—Ä–µ–±—É–µ—Ç ZooKeeper/Kubernetes Leader Election)
    # "false" - standalone —Ä–µ–∂–∏–º
    # 
    # –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï: false (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
    # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å multi-node –∫–ª–∞—Å—Ç–µ—Ä —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Kubernetes
    # 
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.cluster.is.node
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#clustering-configuration
    clusterIsNode: "false"
    
    # --------------------------------------------------------------------------
    # Site-to-Site Configuration
    # --------------------------------------------------------------------------
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è Site-to-Site
    # "true" - Site-to-Site —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ TLS
    # "false" - –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è dev/test)
    # 
    # Site-to-Site –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
    #   - –ü–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É NiFi –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏
    #   - Remote Process Groups
    #   - MiNiFi agents
    # 
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.remote.input.secure
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#site-to-site-properties
    remoteInputSecure: "true"
    
    # –ü–æ—Ä—Ç –¥–ª—è Site-to-Site RAW –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É NiFi –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç: 10443 (–¥–ª—è secure), 10080 (–¥–ª—è unsecure)
    # 
    # Site-to-Site –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:
    #   - RAW (socket-based, –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)
    #   - HTTP (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π web port)
    # 
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.remote.input.socket.port
    remoteInputSocketPort: "10443"
    
    # --------------------------------------------------------------------------
    # Proxy & Context Path Configuration
    # --------------------------------------------------------------------------
    
    # –ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è proxy —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    # "https" - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production
    # "http" - —Ç–æ–ª—å–∫–æ –¥–ª—è dev/test
    # –°–≤–æ–π—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URLs –≤ UI
    webProxyScheme: "https"
    
    # Context path –¥–ª—è web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    # –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å NiFi –Ω–µ –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞
    # –ü—Ä–∏–º–µ—Ä—ã:
    #   "/nifi" ‚Üí https://example.com/nifi/
    #   "" ‚Üí https://example.com/
    # 
    # –í–ê–ñ–ù–û: –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º Ingress/Proxy
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.web.http.context.path
    webHttpContextPath: "/nifi"
  
  # ============================================================================
  # STORAGE: Persistent Volumes –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö NiFi
  # ============================================================================
  # NiFi –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π
  # –ö–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  # 
  # BEST PRACTICES:
  #   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –¥–∏—Å–∫–∏ (SSD) –¥–ª—è flowFile –∏ content repositories
  #   - Provenance repository –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –¥–∏—Å–∫–∞—Ö
  #   - –í production —É–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏
  #   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö StorageClass –¥–ª—è —Ä–∞–∑–Ω—ã—Ö repos
  # 
  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://nifi.apache.org/nifi-docs/administration-guide.html#repositories
  storage:
    # --------------------------------------------------------------------------
    # Config Repository: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã NiFi
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç:
    #   - nifi.properties
    #   - authorizers.xml, authorizations.xml, users.xml
    #   - login-identity-providers.xml
    #   - state-management.xml
    #   - logback.xml
    #   - bootstrap.conf
    #   - flow.json.gz (–≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª dataflow)
    #   - KeyStore –∏ TrustStore —Ñ–∞–π–ª—ã
    # 
    # –†–ê–ó–ú–ï–†: –û–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 500Mi - 1Gi
    # –ö–†–ò–¢–ò–ß–ù–û–°–¢–¨: –í–´–°–û–ö–ê–Ø (–ø–æ—Ç–µ—Ä—è = –ø–æ—Ç–µ—Ä—è –≤—Å–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
    config:
      size: "333Mi"
      storageClass: "local-path"
    
    # --------------------------------------------------------------------------
    # FlowFile Repository: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ FlowFiles –≤ –æ—á–µ—Ä–µ–¥—è—Ö
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ FlowFiles –≤ —Ç—Ä–∞–Ω–∑–∏—Ç–µ:
    #   - Attributes
    #   - Pointer –Ω–∞ content
    #   - Lineage information
    #   - Queue state
    # 
    # –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç actual content (—ç—Ç–æ –≤ Content Repository)
    # 
    # –ü—É—Ç—å: ./flowfile_repository (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.flowfile.repository.directory
    # Implementation: WriteAheadFlowFileRepository (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # 
    # –†–ê–ó–ú–ï–†: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ FlowFiles –≤ –æ—á–µ—Ä–µ–¥—è—Ö
    #   - Dev/Test: 1-5 Gi
    #   - Production —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π: 10-50 Gi
    # 
    # –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨: –ö–†–ò–¢–ò–ß–ù–ê
    #   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –¥–∏—Å–∫–∏ (NVMe SSD)
    #   - –ù–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –Ω–∞ —Ç–æ–º –∂–µ –¥–∏—Å–∫–µ —á—Ç–æ Content Repository
    # 
    # –í–ê–ñ–ù–û: nifi.flowfile.repository.always.sync=false (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    #   true = –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –Ω–æ –û–ß–ï–ù–¨ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
    #   false = —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ power loss
    # 
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#flowfile-repository
    flowFile:
      size: "300Mi"
      storageClass: "local-path"
    
    # --------------------------------------------------------------------------
    # Content Repository: Actual content FlowFiles
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç –±–∞–π—Ç—ã (payload) FlowFiles
    # –°–∞–º–æ–µ –±–æ–ª—å—à–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ NiFi
    # 
    # –ü—É—Ç—å: ./content_repository (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.content.repository.directory.default
    # Implementation: FileSystemRepository
    # 
    # –†–ê–ó–ú–ï–†: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç:
    #   - –†–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    #   - –°–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ vs —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
    #   - Retention policies
    # 
    # –†–∞—Å—á—ë—Ç: <avg_file_size> * <files_per_second> * <max_queue_time_seconds>
    # –ü—Ä–∏–º–µ—Ä: 1MB * 100 files/sec * 3600 sec (1 hour) = 360 GB
    # 
    # Production: 100GB - –Ω–µ—Å–∫–æ–ª—å–∫–æ TB
    # Dev/Test: 10-50 GB
    # 
    # –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
    #   - nifi.content.repository.archive.enabled=true (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    #   - nifi.content.repository.archive.max.usage.percentage=50%
    #   - nifi.content.claim.max.appendable.size=50KB (–¥–ª—è –º–∞–ª—ã—Ö —Ñ–∞–π–ª–æ–≤)
    # 
    # –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨: –ö–†–ò–¢–ò–ß–ù–ê
    #   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –¥–∏—Å–∫–∏ (SSD)
    #   - –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ I/O
    # 
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#content-repository
    content:
      size: "300Mi"
      storageClass: "local-path"
    
    # --------------------------------------------------------------------------
    # Provenance Repository: –ê—É–¥–∏—Ç –∏ Data Lineage
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–±—ã—Ç–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Data Provenance):
    #   - CREATE, RECEIVE, SEND, ROUTE, MODIFY events
    #   - FlowFile attributes snapshots
    #   - Processor details
    #   - Timestamps
    # 
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
    #   - –ê—É–¥–∏—Ç–∞ –∏ compliance
    #   - Troubleshooting (replay events)
    #   - Data lineage visualization
    # 
    # –ü—É—Ç—å: ./provenance_repository (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.provenance.repository.directory.default
    # Implementation: WriteAheadProvenanceRepository (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    # 
    # –†–ê–ó–ú–ï–†: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç:
    #   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏–π (–∫–∞–∂–¥—ã–π FlowFile –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π)
    #   - Retention time (nifi.provenance.repository.max.storage.time=30 days)
    #   - Indexed fields (–±–æ–ª—å—à–µ –∏–Ω–¥–µ–∫—Å–æ–≤ = –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞)
    # 
    # –†–∞—Å—á—ë—Ç: <events_per_second> * <avg_event_size_bytes> * <retention_seconds>
    # –ü—Ä–∏–º–µ—Ä: 1000 events/sec * 1KB * 2592000 sec (30 days) = ~2.5 TB
    # 
    # Production: 50GB - –Ω–µ—Å–∫–æ–ª—å–∫–æ TB
    # Dev/Test: 10-50 GB
    # 
    # –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
    #   - –£–º–µ–Ω—å—à–∏—Ç–µ retention: nifi.provenance.repository.max.storage.time=7 days
    #   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä: nifi.provenance.repository.max.storage.size=100GB
    #   - –ò–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è: nifi.provenance.repository.indexed.fields
    # 
    # –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´:
    #   - VolatileProvenanceRepository (–≤ –ø–∞–º—è—Ç–∏, —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ)
    #   - NoOpProvenanceRepository (–æ—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é)
    # 
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#provenance-repository
    provenance:
      size: "300Mi"
      storageClass: "local-path"
    
    # --------------------------------------------------------------------------
    # Database Repository: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ë–î NiFi
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç:
    #   - Flow Configuration History (–∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω—è–ª flow)
    #   - Component state
    #   - Cluster coordination data (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ embedded H2)
    # 
    # –ü—É—Ç—å: ./database_repository (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # –°–≤–æ–π—Å—Ç–≤–æ –≤ nifi.properties: nifi.database.directory
    # Implementation: H2 Database
    # 
    # –†–ê–ó–ú–ï–†: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–π
    #   - Dev/Test: 500Mi - 1Gi
    #   - Production: 2-10 Gi
    # 
    # –í–ê–ñ–ù–û: Backup –ø–µ—Ä–µ–¥ upgrade NiFi!
    # 
    # –°–º. https://nifi.apache.org/nifi-docs/administration-guide.html#database-settings
    database:
      size: "300Mi"
      storageClass: "local-path"
    
    # --------------------------------------------------------------------------
    # Logs Repository: –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    # --------------------------------------------------------------------------
    # –°–æ–¥–µ—Ä–∂–∏—Ç:
    #   - nifi-app.log (–æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏)
    #   - nifi-bootstrap.log (–ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞)
    #   - nifi-user.log (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
    #   - nifi-request.log (HTTP –∑–∞–ø—Ä–æ—Å—ã)
    # 
    # –ü—É—Ç—å: ./logs (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: conf/logback.xml
    # 
    # –†–ê–ó–ú–ï–†: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç:
    #   - Log level (DEBUG vs INFO)
    #   - Rotation policy (logback.xml)
    #   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ processor events
    # 
    # Production: 5-20 GB (—Å —É—á—ë—Ç–æ–º rotation)
    # Dev/Test: 1-5 GB
    # 
    # –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
    #   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ INFO —É—Ä–æ–≤–µ–Ω—å –≤ production
    #   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ rotation –≤ logback.xml:
    #     <maxFileSize>100MB</maxFileSize>
    #     <maxHistory>30</maxHistory>
    #   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É –ª–æ–≥–æ–≤ –≤ –≤–Ω–µ—à–Ω—é—é —Å–∏—Å—Ç–µ–º—É (ELK, Loki)
    # 
    # –î–û–°–¢–£–ü –ö –õ–û–ì–ê–ú:
    #   kubectl logs <pod-name> -n nifi                    # stdout/stderr
    #   kubectl exec -it <pod-name> -n nifi -- tail -f logs/nifi-app.log
    logs:
      size: "300Mi"
      storageClass: "local-path"
  
  # ============================================================================
  # INIT CONTAINER: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º NiFi
  # ============================================================================
  # Init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏:
  #   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  #   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è nifi.properties –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤
  #   - –ò–º–ø–æ—Ä—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ KeyStore/TrustStore
  #   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ authorizers.xml, login-identity-providers.xml
  #   - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
  # 
  # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: setupNifiProperties/cmd/nifi-setup/setup-nifi.go
  init:
    # –û–ü–ê–°–ù–û! –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    # 
    # true  = –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ Pod –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    #         –ü–û–¢–ï–†–Ø –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ UI:
    #           - –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã (users.xml)
    #           - –ù–æ–≤—ã–µ policies (authorizations.xml)
    #           - –†—É—á–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ nifi.properties
    # 
    # false = –ö–æ–Ω—Ñ–∏–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
    #         –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ—Å—Ç–∞—Ä—Ç–∞–º–∏
    # 
    # –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
    #   - true:  –¢–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ development
    #   - false: –í–°–ï–ì–î–ê –≤ production –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    # 
    # –í–ù–ò–ú–ê–ù–ò–ï: –í–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–æ–π –æ–ø—Ü–∏–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ NiFi = –ø–æ—Ç–µ—Ä—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!
    overWrite: false
  
  # ============================================================================
  # RESOURCES: CPU –∏ Memory –ª–∏–º–∏—Ç—ã –¥–ª—è NiFi Pod
  # ============================================================================
  # Kubernetes Resource Management –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ NiFi
  # 
  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
  # NiFi Requirements: https://nifi.apache.org/nifi-docs/administration-guide.html#system-requirements
  resources:
    # --------------------------------------------------------------------------
    # Requests: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–≤–ª–∏—è–µ—Ç –Ω–∞ scheduling)
    # --------------------------------------------------------------------------
    # Kubernetes –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ Pod –ø–æ–ª—É—á–∏—Ç –∫–∞–∫ –º–∏–Ω–∏–º—É–º —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è scheduler'–æ–º –¥–ª—è –≤—ã–±–æ—Ä–∞ Node
    requests:
      # CPU request
      # 1000m = 1 CPU core
      # 
      # NiFi - CPU intensive –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏:
      #   - –ú–Ω–æ–≥–æ processor threads
      #   - –°–ª–æ–∂–Ω—ã–µ transformations
      #   - –ö–æ–º–ø—Ä–µ—Å—Å–∏—è/–¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
      #   Dev/Test: 500m - 1000m
      #   Production (low load): 2000m - 4000m
      #   Production (high load): 4000m+
      cpu: "1000m"
      
      # Memory request
      # NiFi —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ JVM, —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è:
      #   - Java Heap (—Ö—Ä–∞–Ω–µ–Ω–∏–µ FlowFile attributes, –ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥)
      #   - Off-Heap (NIO buffers, FlowFile content –≤ –ø–∞–º—è—Ç–∏)
      #   - OS cache –¥–ª—è I/O operations
      # 
      # –†–ê–°–ß–Å–¢ Java Heap:
      #   –û–±—ã—á–Ω–æ 50-75% –æ—Ç –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ Pod
      #   –û—Å—Ç–∞–ª—å–Ω–æ–µ –¥–ª—è OS –∏ off-heap buffers
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
      #   Dev/Test: 2Gi (Heap ~1Gi)
      #   Production (low load): 8Gi (Heap ~4-6Gi)
      #   Production (high load): 16Gi+ (Heap ~8-12Gi)
      # 
      # –ù–ê–°–¢–†–û–ô–ö–ê HEAP –≤ bootstrap.conf:
      #   java.arg.2=-Xms<size>
      #   java.arg.3=-Xmx<size>
      memory: "2Gi"
    
    # --------------------------------------------------------------------------
    # Limits: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (hard limit)
    # --------------------------------------------------------------------------
    # Pod –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    # –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ Memory limit = OOMKilled (Pod restart)
    # –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ CPU limit = throttling (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)
    limits:
      # CPU limit
      # 2000m = 2 CPU cores
      # 
      # –í–ê–ñ–ù–û: CPU limit = throttling –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
      # –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É limit = request –¥–ª—è predictable performance
      # –ò–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ limit –≤–æ–æ–±—â–µ –¥–ª—è burstable workloads
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
      #   - limit = 2-3x request (–¥–ª—è burst'–æ–≤)
      #   - –∏–ª–∏ limit = request (–¥–ª—è stable performance)
      cpu: "2000m"
      
      # Memory limit
      # 4Gi = 4 –≥–∏–≥–∞–±–∞–π—Ç–∞
      # 
      # –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ = OOMKilled
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
      #   - limit >= 1.5x request (–¥–ª—è –±—É—Ñ–µ—Ä–∞)
      #   - –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ usage –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
      #   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Heap dumps –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ OOM:
      #     bootstrap.conf:
      #       java.arg.XX=-XX:+HeapDumpOnOutOfMemoryError
      #       java.arg.XX=-XX:HeapDumpPath=./work/heap-dumps
      memory: "4Gi"

  # ============================================================================
  # SERVICE ACCOUNT: mTLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è internal API calls
  # ============================================================================
  # Service Account –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
  #   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API –≤—ã–∑–æ–≤–æ–≤ –º–µ–∂–¥—É NiFi –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
  #   - Cluster node communication (–≤ multi-node setup)
  #   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ REST API
  # 
  # –¢—Ä–µ–±—É–µ—Ç—Å—è X.509 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è mTLS (mutual TLS) –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  serviceAccount:
    # –ò–º—è Kubernetes Secret —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Service Account
    # 
    # –§–æ—Ä–º–∞—Ç Secret:
    #   apiVersion: v1
    #   kind: Secret
    #   type: kubernetes.io/tls
    #   data:
    #     tls.crt: <base64-PEM-certificate>
    #     tls.key: <base64-PEM-private-key>
    # 
    # –ì–ï–ù–ï–†–ê–¶–ò–Ø —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º cert-manager:
    #   apiVersion: cert-manager.io/v1
    #   kind: Certificate
    #   spec:
    #     commonName: nifi-operator-client
    #     dnsNames:
    #       - nifi-operator-client
    #     issuerRef:
    #       name: nifi-ca-issuer
    #     secretName: nificl-sa-cert
    # 
    # –†–£–ß–ù–ê–Ø –ì–ï–ù–ï–†–ê–¶–ò–Ø —Å openssl:
    #   openssl req -x509 -newkey rsa:4096 -keyout sa-key.pem -out sa-cert.pem \
    #     -days 365 -nodes -subj "/CN=nifi-operator-client"
    #   kubectl create secret tls nificl-sa-cert \
    #     --cert=sa-cert.pem --key=sa-key.pem -n nifi
    secretName: "nificl-sa-cert"
    
    # Common Name (CN) —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Service Account
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
    #   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ NiFi authorizations
    #   - Mapping –Ω–∞ User/Group –≤ authorizers.xml
    # 
    # –í–ê–ñ–ù–û: CN –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å CN –≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ
    # –≠—Ç–æ—Ç identity –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ authorizers.xml:
    #   <property name="Node Identity 1">CN=nifi-operator-client</property>
    cN: "nifi-operator-client"    
  
  
# ============================================================================
  # ADMIN GATEWAY: Reverse Proxy –¥–ª—è NiFi REST API
  # ============================================================================
  # Admin Gateway - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è:
  #   - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è REST API –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ NiFi
  #   - –û–±—Ä–∞–±–æ—Ç–∫–∏ mTLS –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
  #   - –î–æ–±–∞–≤–ª–µ–Ω–∏—è X-ProxiedEntitiesChain headers
  #   - –†–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ client certificates
  # 
  # –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:
  #   External Client ‚Üí Ingress ‚Üí Admin Gateway (mTLS) ‚Üí NiFi Pod
  # 
  # –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
  #   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (CI/CD, Airflow, etc.)
  #   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ REST API –±–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è client certificates
  #   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API
  # 
  # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: Python Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å requests + client certificates
  # –ö–æ–¥: admin-gateway/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
  adminGateway:
    # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å Admin Gateway
    # false = API –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ NiFi Service (—Ç—Ä–µ–±—É–µ—Ç client cert)
    # true = API –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ proxy (–±–µ–∑ client cert –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞)
    enabled: true
    
    # –¢–∏–ø Kubernetes Service –¥–ª—è Admin Gateway
    # –û–ø—Ü–∏–∏:
    #   - ClusterIP: –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (—á–µ—Ä–µ–∑ Ingress)
    #   - NodePort: –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ NodePort (–¥–ª—è testing)
    #   - LoadBalancer: –í–Ω–µ—à–Ω–∏–π IP (–¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
    # 
    # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: ClusterIP + Ingress –¥–ª—è production
    serviceType: "ClusterIP"
    
    # --------------------------------------------------------------------------
    # Backend Configuration: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ NiFi
    # --------------------------------------------------------------------------
    
    # URL NiFi Service –¥–ª—è backend –∑–∞–ø—Ä–æ—Å–æ–≤
    # –§–æ—Ä–º–∞—Ç: https://<service-name>.<namespace>.svc.cluster.local:<port>
    # 
    # –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω–æ–µ DNS –∏–º—è (FQDN) –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
    # –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ–æ—Ä–º—ã –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ DNS search domains
    # 
    # –ü—Ä–∏–º–µ—Ä—ã:
    #   - https://nificl.nifi:8443 (–∫–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º–∞)
    #   - https://nificl.nifi.svc.cluster.local:8443 (–ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    # 
    # Admin Gateway –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —ç—Ç–æ–º—É URL –∏—Å–ø–æ–ª—å–∑—É—è mTLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
    nifiServiceUrl: "https://nificl.nifi.svc.cluster.local:8443"
    
    # Hostname:port –¥–ª—è proxy (–≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø)
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URLs –≤ –æ—Ç–≤–µ—Ç–∞—Ö
    # 
    # –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:
    #   - spec.adminGateway.ingress.host (–¥–ª—è API Ingress)
    #   - –∏–ª–∏ external hostname –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LoadBalancer
    # 
    # –§–æ—Ä–º–∞—Ç: <hostname>:<port>
    # –ï—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTPS –ø–æ—Ä—Ç 443, –ø–æ—Ä—Ç –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å: <hostname>
    proxyHost: "nifi.kube5s.ru:443" # *** –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Ä—Ç 443 (Ingress)
    
    # --------------------------------------------------------------------------
    # TLS Configuration: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è Admin Gateway
    # --------------------------------------------------------------------------
    tls:
      # –ò–º—è Kubernetes Secret —Å TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –¥–ª—è Admin Gateway
      # 
      # –§–æ—Ä–º–∞—Ç Secret:
      #   apiVersion: v1
      #   kind: Secret
      #   type: kubernetes.io/tls
      #   data:
      #     tls.crt: <base64-certificate>
      #     tls.key: <base64-private-key>
      #     ca.crt: <base64-ca-certificate> (optional)
      # 
      # –ì–ï–ù–ï–†–ê–¶–ò–Ø:
      #   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ cert-manager –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
      #   openssl req -x509 -newkey rsa:2048 -nodes \
      #     -keyout gateway-key.pem -out gateway-cert.pem -days 365 \
      #     -subj "/CN=nifi.example.com"
      #   kubectl create secret tls nifi-admin-gateway-tls-secret \
      #     --cert=gateway-cert.pem --key=gateway-key.pem -n nifi
      secretName: "nifi-admin-gateway-tls-secret"
    
    # --------------------------------------------------------------------------
    # Ingress: –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ Admin Gateway API
    # --------------------------------------------------------------------------
    ingress:
      # –í–∫–ª—é—á–∏—Ç—å Ingress –¥–ª—è Admin Gateway
      # false = –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ ClusterIP (–≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞)
      # true = –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Ingress Controller
      enabled: true
      
      # Hostname –¥–ª—è API endpoints
      # –ö–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è: https://nifi.example.com/nifi-api/...
      # 
      # –í–ê–ñ–ù–û: 
      #   - DNS –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ Ingress Controller
      #   - –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ NiFi UI host (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ concerns)
      host: "api2.kube5s.ru" # ***
      
      # Ingress Class –¥–ª—è routing
      # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π Ingress Controller –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ—Ç Ingress
      # –ü—Ä–∏–º–µ—Ä—ã: nginx, traefik, haproxy
      className: "nginx"
      
      # Path prefix –¥–ª—è API
      # –ó–∞–ø—Ä–æ—Å—ã –∫ /nifi-api/* –±—É–¥—É—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ Admin Gateway
      # 
      # –í–ê–ñ–ù–û: Path –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å NiFi API paths:
      #   /nifi-api/access/token
      #   /nifi-api/flow/process-groups/root
      #   /nifi-api/controller/cluster
      #   etc.
      path: "/nifi-api/"
      
      # --------------------------------------------------------------------------
      # Annotations: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Ingress Controller
      # --------------------------------------------------------------------------
      # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–º—É NiFi Ingress (spec.ingress.annotations)
      # –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cert-manager, —Ä–∞–∑–º–µ—Ä body, SSL –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      annotations:
        # Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS
        nginx.ingress.kubernetes.io/backend-protocol: HTTPS
        
        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
        # API –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –±–æ–ª—å—à–∏–µ templates, flow exports
        nginx.ingress.kubernetes.io/proxy-body-size: 110m
        
        # –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ backend
        nginx.ingress.kubernetes.io/proxy-ssl-verify: "off"
        
        # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP ‚Üí HTTPS
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
    
    # --------------------------------------------------------------------------
    # Resources: –õ–∏–º–∏—Ç—ã –¥–ª—è Admin Gateway Pod
    # --------------------------------------------------------------------------
    # Admin Gateway - –ª—ë–≥–∫–æ–≤–µ—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Python Flask)
    # –ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤
    
    # --------------------------------------------------------------------------
    # –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: Basic Auth –¥–ª—è –∑–∞—â–∏—Ç—ã Admin Gateway API
    # --------------------------------------------------------------------------
    # –ï—Å–ª–∏ Admin Gateway —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —É–∫–∞–∂–∏—Ç–µ Secret —Å credentials:
    # 
    # basicAuthSecret: "admin-gateway-credentials"
    #
    # Secret –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
    #   username: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    #   password: –ø–∞—Ä–æ–ª—å
    #
    # –°–æ–∑–¥–∞–Ω–∏–µ Secret:
    #   kubectl create secret generic admin-gateway-credentials \
    #     --from-literal=username=admin \
    #     --from-literal=password=your-secure-password \
    #     -n nifi
    #
    # –í–ê–ñ–ù–û: –û–ø–µ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ credentials –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏
    #        –∫ Admin Gateway API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Registry Clients).
    #        –ù–ï –¢–†–ï–ë–£–ï–¢–°–Ø –º–µ–Ω—è—Ç—å –∫–æ–¥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞!
    # --------------------------------------------------------------------------
    
    resources:
      requests:
        # CPU: 100m –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è low-medium load
        # –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 200-500m –¥–ª—è high traffic
        cpu: "100m"
        
        # Memory: 128Mi –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è Flask app
        # Python –ø—Ä–æ—Ü–µ—Å—Å + –Ω–µ–±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä
        memory: "128Mi"
      limits:
        # CPU limit: 500m –¥–ª—è burst'–æ–≤
        # Admin Gateway –æ–±—ã—á–Ω–æ –Ω–µ CPU intensive
        cpu: "500m"
        
        # Memory limit: 512Mi —Å –∑–∞–ø–∞—Å–æ–º
        # Flask + requests –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ + connection pools
        memory: "512Mi"
  
  # ============================================================================
  # REGISTRY CLIENTS: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NiFi Registry
  # ============================================================================
  # NiFi Registry –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç version control –¥–ª—è dataflows
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ REST API
  #
  # –ü–†–ê–í–ò–õ–ê –£–ù–ò–ö–ê–õ–¨–ù–û–°–¢–ò (–≤–∞–∂–Ω–æ!):
  #   - name: –î–û–õ–ñ–ï–ù –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞
  #   - url:  –ú–û–ñ–ï–¢ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö name (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–Ω—ã–µ credentials)
  #
  # –û–ë–†–ê–ë–û–¢–ö–ê –î–£–ë–õ–ò–ö–ê–¢–û–í:
  #   - –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ Registry Clients —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º name: –í–°–ï –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
  #   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã —Å–æ–∑–¥–∞–Ω–∏—è
  #   - –û–ø–µ—Ä–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  #
  # –ü–†–ò–ú–ï–†–´ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô:
  #   ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ä–∞–∑–Ω—ã–µ name, —Ä–∞–∑–Ω—ã–µ url:
  #      - name: "Production Registry"
  #        url: "https://registry.kube5s.ru/nifi-registry"
  #      - name: "Dev Registry"
  #        url: "https://registry-dev.kube5s.ru/nifi-registry"
  #
  #   ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ä–∞–∑–Ω—ã–µ name, –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π url (—Ä–∞–∑–Ω—ã–µ credentials):
  #      - name: "Registry Read-Only"
  #        url: "https://registry.kube5s.ru/nifi-registry"
  #      - name: "Registry Admin"
  #        url: "https://registry.kube5s.ru/nifi-registry"
  #
  #   ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –¥—É–±–ª–∏–∫–∞—Ç name (–±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –û–ë–ê):
  #      - name: "Production Registry"
  #        url: "https://registry.kube5s.ru/nifi-registry"
  #      - name: "Production Registry"  # <-- –¥—É–±–ª–∏–∫–∞—Ç!
  #        url: "https://registry2.kube5s.ru/nifi-registry"
  #
  # –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö:
  #   - –ï—Å–ª–∏ Registry –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—Å—Ç Event –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç —á–µ—Ä–µ–∑ 30 —Å–µ–∫
  #   - –ï—Å–ª–∏ URL –Ω–µ–≤–µ—Ä–Ω—ã–π: Event —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–∫–∏
  #   - –ü—Ä–æ–≤–µ—Ä–∫–∞: kubectl get events | grep Registry
  #   - –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞: kubectl logs -n nifi-operator-system <operator-pod>
  #
  # –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê:
  #   curl -sk "https://api.kube5s.ru/nifi-api/controller/registry-clients" | jq '.registries[] | {name: .component.name, url: .component.properties.url}'
  registryClients: 
    - name: "Naeel Dev0 Registry"
      url: "https://registry.registry.svc.cluster.local:18443"
      # SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è mTLS —Å Registry (optional)
      # –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω SSL Context Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      ssl:
        # Keystore –¥–ª—è client certificate (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è NiFi –≤ Registry)
        keystoreFile: "/opt/nifi/nifi-current/conf/keystore.p12"
        keystorePassword: "parole"
        keystoreType: "PKCS12"
        # Truststore –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ server certificate Registry
        truststoreFile: "/opt/nifi/nifi-current/conf/truststore-custom.jks"
        truststorePassword: "parole"
        truststoreType: "JKS"
        sslProtocol: "TLS"
    # - name: "Production Registry1"
    #   url: "https://registry.kube5s.ru/nifi-registry"
  
  # ============================================================================
  # INGRESS: –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ NiFi UI
  # ============================================================================
  # Ingress –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP(S) –¥–æ—Å—Ç—É–ø –∫ NiFi Web UI –∏–∑-–∑–∞ –ø—Ä–µ–¥–µ–ª–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞
  # 
  # –†–ê–ó–î–ï–õ–ï–ù–ò–ï –î–û–°–¢–£–ü–û–í:
  #   - spec.ingress: NiFi UI (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
  #   - spec.adminGateway.ingress: REST API (–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–æ—Å—Ç—É–ø)
  # 
  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Proxy: https://nifi.apache.org/nifi-docs/administration-guide.html#proxy-configuration
  ingress:
    # –í–∫–ª—é—á–∏—Ç—å Ingress –¥–ª—è NiFi UI
    # false = –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ port-forward –∏–ª–∏ NodePort
    # true = –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Ingress Controller
    enabled: true
    
    # Ingress Class –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    # –ü—Ä–∏–º–µ—Ä—ã: nginx, traefik, haproxy, istio
    # 
    # Kubernetes 1.18+: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ className –≤–º–µ—Å—Ç–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
    # kubernetes.io/ingress.class (deprecated)
    className: "nginx"
    
    # Hostname –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ NiFi UI
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å: https://nifi.kube5s.ru/nifi/
    # 
    # –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
    #   - DNS –∑–∞–ø–∏—Å—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP Ingress Controller
    #   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç spec.env.webProxyHost
    #   - TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞ (—Å–º. spec.ingress.tls)
    # 
    # –í–ê–ñ–ù–û: NiFi –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Host header (nifi.web.proxy.host –≤ nifi.properties)
    # –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ = HTTP 421 Misdirected Request
    host: "nifi.kube5s.ru" # ***
    
    # --------------------------------------------------------------------------
    # Annotations: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Ingress Controller
    # --------------------------------------------------------------------------
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ Ingress Controller (nginx –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ)
    annotations:
      # Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS (–Ω–µ HTTP)
      # Ingress Controller –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ NiFi Pod —á–µ—Ä–µ–∑ HTTPS
      # 
      # –ë–µ–∑ —ç—Ç–æ–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏: Ingress ‚Üí HTTP ‚Üí NiFi (–æ—à–∏–±–∫–∞)
      # –° —ç—Ç–æ–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π: Ingress ‚Üí HTTPS ‚Üí NiFi (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
      nginx.ingress.kubernetes.io/backend-protocol: HTTPS
      
      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (upload size)
      # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é nginx –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç: 1m
      # 
      # NiFi —á–∞—Å—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ UI:
      #   - Templates
      #   - Flow exports/imports
      #   - Processor configurations
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
      #   Dev/Test: 50m - 100m
      #   Production: 100m - 500m (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç use case)
      # 
      # –¢–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ NiFi: nifi.web.max.content.size=110m (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
      nginx.ingress.kubernetes.io/proxy-body-size: 110m
      
      # –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ backend (NiFi Pod)
      # "off" = Ingress –¥–æ–≤–µ—Ä—è–µ—Ç self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º NiFi
      # "on" = –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–π CA-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
      # 
      # –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
      #   Development: "off" (—É–¥–æ–±–Ω–æ —Å self-signed certs)
      #   Production: "on" + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CA-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
      # 
      # –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CA bundle —á–µ—Ä–µ–∑ nginx.ingress.kubernetes.io/proxy-ssl-trusted-certificate
      nginx.ingress.kubernetes.io/proxy-ssl-verify: "off"
      
      # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP ‚Üí HTTPS
      # "true" = HTTP –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—è—Ç—Å—è –Ω–∞ HTTPS
      # "false" = –†–∞–∑—Ä–µ—à—ë–Ω –¥–æ—Å—Ç—É–ø –ø–æ HTTP
      # 
      # –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í—Å–µ–≥–¥–∞ "true" –¥–ª—è production (security best practice)
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
    
    # --------------------------------------------------------------------------
    # TLS: HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è Ingress
    # --------------------------------------------------------------------------
    # –ú–∞—Å—Å–∏–≤ TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–æ–≤)
    tls:
      # TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞
      - hosts:
          # –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –ø–æ–∫—Ä—ã–≤–∞–µ–º—ã—Ö —ç—Ç–∏–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
          # –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å spec.ingress.host
          # 
          # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ hosts –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç SAN/wildcard:
          #   - nifi.kube5s.ru
          #   - www.nifi.kube5s.ru
          #   - *.kube5s.ru (wildcard)
          - nifi.kube5s.ru # ***
        
        # –ò–º—è Kubernetes Secret —Å TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
        # 
        # –§–æ—Ä–º–∞—Ç Secret:
        #   apiVersion: v1
        #   kind: Secret
        #   type: kubernetes.io/tls
        #   data:
        #     tls.crt: <base64-certificate-chain>
        #     tls.key: <base64-private-key>
        # 
        # –ì–ï–ù–ï–†–ê–¶–ò–Ø –° cert-manager (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
        #   apiVersion: cert-manager.io/v1
        #   kind: Certificate
        #   spec:
        #     secretName: nifi-tls-secret
        #     issuerRef:
        #       name: letsencrypt-prod
        #     dnsNames:
        #       - nifi.kube5s.ru
        # 
        # –†–£–ß–ù–ê–Ø –ì–ï–ù–ï–†–ê–¶–ò–Ø:
        #   openssl req -x509 -newkey rsa:2048 -nodes \
        #     -keyout tls.key -out tls.crt -days 365 \
        #     -subj "/CN=nifi.kube5s.ru"
        #   kubectl create secret tls nifi-tls-secret \
        #     --cert=tls.crt --key=tls.key -n nifi
        # 
        # –í–ê–ñ–ù–û: Ingress –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Let's Encrypt –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
        # –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–µ–Ω –¥–ª—è:
        #   - –ë—Ä–∞—É–∑–µ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (CA-signed –¥–ª—è production)
        #   - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç—É–∞–ª–µ–Ω
        #   - CN –∏–ª–∏ SAN –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å spec.ingress.host (nifi.kube5s.ru)
        # 
        # –†–ê–ó–î–ï–õ–ï–ù–ò–ï –°–ï–†–¢–ò–§–ò–ö–ê–¢–û–í:
        #   - –≠—Ç–æ—Ç secretName: Let's Encrypt –¥–ª—è Ingress/–±—Ä–∞—É–∑–µ—Ä–æ–≤ (–±–µ–∑ .cluster.local)
        #   - spec.tlsSecretName: self-signed –¥–ª—è NiFi —Å–µ—Ä–≤–µ—Ä–∞ (—Å .cluster.local DNS)
        secretName: nifi-tls-secret
